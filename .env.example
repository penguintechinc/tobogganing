# SASEWaddle Environment Configuration Template
# Copy this file to .env and adjust values for your environment

# =============================================================================
# Manager Service Configuration
# =============================================================================

# Database Configuration (PyDAL supports mysql, postgresql, sqlite)
DB_TYPE=mysql
DB_HOST=mysql
DB_PORT=3306
DB_USER=sasewaddle
DB_PASSWORD=change_this_password
DB_NAME=sasewaddle
DB_POOL_SIZE=10
DB_CHARSET=utf8mb4

# Read Replica Configuration (Optional - for high availability)
DB_READ_REPLICA_ENABLED=false
DB_READ_HOST=mysql-read
DB_READ_PORT=3306
DB_READ_USER=sasewaddle_read
DB_READ_PASSWORD=change_this_password
DB_READ_NAME=sasewaddle
DB_READ_POOL_SIZE=5

# TLS/SSL Database Connection (Optional - for production)
DB_TLS_ENABLED=false
DB_TLS_CA_CERT=/certs/ca.pem
DB_TLS_CLIENT_CERT=/certs/client-cert.pem
DB_TLS_CLIENT_KEY=/certs/client-key.pem
DB_TLS_VERIFY_MODE=VERIFY_CA

# Redis Configuration
REDIS_URL=redis://redis:6379/0

# Security Settings
JWT_SECRET=change_this_to_random_secret_key
SESSION_TIMEOUT_HOURS=8
METRICS_TOKEN=prometheus-scraper-token
TOKEN_EXPIRY_HOURS=24
REFRESH_EXPIRY_DAYS=7

# Service Configuration
MANAGER_PORT=8000
MANAGER_WORKERS=4
MANAGER_LOG_LEVEL=info
THREAD_POOL_SIZE=10

# Backup Configuration
BACKUP_DIR=/data/backups

# S3-Compatible Backup Storage (Optional)
BACKUP_S3_ENABLED=false
BACKUP_S3_ENDPOINT_URL=https://s3.amazonaws.com
BACKUP_S3_BUCKET=sasewaddle-backups
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ACCESS_KEY=your_access_key
BACKUP_S3_SECRET_KEY=your_secret_key
BACKUP_S3_PREFIX=backups/
BACKUP_S3_USE_SSL=true
BACKUP_S3_VERIFY_SSL=true

# =============================================================================
# Headend Server Configuration
# =============================================================================

# Manager Connection
MANAGER_API_URL=http://manager:8000
HEADEND_AUTH_TOKEN=change_this_token
HEADEND_ID=headend-us-east-1
CLUSTER_ID=us-east-1

# Network Configuration
HEADEND_LISTEN_ADDRESS=0.0.0.0
HEADEND_HTTP_PORT=8080
HEADEND_HTTPS_PORT=8443
HEADEND_METRICS_PORT=9090

# WireGuard Configuration
WIREGUARD_INTERFACE=wg0
WIREGUARD_PORT=51820
WIREGUARD_PRIVATE_KEY=auto_generate

# Traffic Mirroring Configuration
TRAFFIC_MIRROR_ENABLED=false
TRAFFIC_MIRROR_DESTINATIONS=10.0.0.100:4789,10.0.0.101:4789
TRAFFIC_MIRROR_PROTOCOL=VXLAN
TRAFFIC_MIRROR_SAMPLE_RATE=100
TRAFFIC_MIRROR_BUFFER_SIZE=1000

# Suricata IDS/IPS Integration
TRAFFIC_MIRROR_SURICATA_ENABLED=false
TRAFFIC_MIRROR_SURICATA_HOST=172.20.0.100
TRAFFIC_MIRROR_SURICATA_PORT=9999

# Syslog Configuration
HEADEND_SYSLOG_ENABLED=false
HEADEND_SYSLOG_SERVER=syslog.example.com:514
HEADEND_SYSLOG_FACILITY=local0
HEADEND_SYSLOG_TAG=sasewaddle-headend

# Performance Tuning
HEADEND_MAX_CONNECTIONS=10000
HEADEND_READ_TIMEOUT=30
HEADEND_WRITE_TIMEOUT=30
HEADEND_IDLE_TIMEOUT=120

# Analytics Configuration
HEADEND_API_KEY=change_this_headend_api_key
ANALYTICS_RETENTION_DAYS=90
ANALYTICS_AGGREGATION_ENABLED=true

# =============================================================================
# Client Configuration
# =============================================================================

# Default Client Settings
CLIENT_AUTO_RECONNECT=true
CLIENT_RECONNECT_INTERVAL=30
CLIENT_KEEPALIVE_INTERVAL=25
CLIENT_HANDSHAKE_TIMEOUT=5

# =============================================================================
# Monitoring Configuration
# =============================================================================

# Prometheus Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_RETENTION_TIME=15d

# Grafana Configuration
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_this_password
GRAFANA_ANONYMOUS_ENABLED=false

# =============================================================================
# External Identity Provider Configuration
# =============================================================================

# IdP Type (SAML2, OAUTH2, or INTERNAL)
IDP_TYPE=INTERNAL

# OAuth2 Configuration (if IDP_TYPE=OAUTH2)
OAUTH2_CLIENT_ID=your_client_id
OAUTH2_CLIENT_SECRET=your_client_secret
OAUTH2_AUTH_URL=https://provider.example.com/oauth2/auth
OAUTH2_TOKEN_URL=https://provider.example.com/oauth2/token
OAUTH2_USER_INFO_URL=https://provider.example.com/userinfo
OAUTH2_SCOPES=openid,profile,email

# SAML2 Configuration (if IDP_TYPE=SAML2)
SAML2_IDP_METADATA_URL=https://idp.example.com/metadata
SAML2_SP_ENTITY_ID=https://sasewaddle.example.com
SAML2_SP_ACS_URL=https://sasewaddle.example.com/saml/acs

# =============================================================================
# Development/Debug Settings
# =============================================================================

ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=info

# =============================================================================
# Docker/Container Settings
# =============================================================================

# Docker network configuration
DOCKER_NETWORK_SUBNET=172.20.0.0/16

# Resource limits (optional)
CONTAINER_MEMORY_LIMIT=512m
CONTAINER_CPU_LIMIT=1.0